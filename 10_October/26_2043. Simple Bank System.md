# 2043. Simple Bank System

[![LeetCode](https://img.shields.io/badge/LeetCode-2043-yellow?style=for-the-badge&logo=leetcode)](https://leetcode.com/problems/simple-bank-system/description/)
[![Medium](https://img.shields.io/badge/Difficulty-Medium-orange?style=for-the-badge)](https://leetcode.com/problems/simple-bank-system/description/)

---

**Problem Link:** [https://leetcode.com/problems/simple-bank-system/description/](https://leetcode.com/problems/simple-bank-system/description/)  
**Problem Name:** Simple Bank System  
**Difficulty:** Medium  
**Tags:** `Array`, `Design`, `Simulation`

---

## üìù Problem Statement

You have been tasked with writing a program for a popular bank that will automate all its incoming transactions (transfer, deposit, and withdraw). The bank has **n** accounts numbered from **1** to **n**. The initial balance of each account is stored in a **0-indexed** integer array `balance`, with the **(i + 1)th** account having an initial balance of `balance[i]`.

Execute all the **valid** transactions. A transaction is **valid** if:

- The given account number(s) are between **1** and **n**, and
- The amount of money withdrawn or transferred from is **less than or equal** to the balance of the account.

Implement the `Bank` class:

- `Bank(long[] balance)` Initializes the object with the **0-indexed** integer array `balance`.
- `boolean transfer(int account1, int account2, long money)` Transfers `money` dollars from the account numbered `account1` to the account numbered `account2`. Return `true` if the transaction was successful, `false` otherwise.
- `boolean deposit(int account, long money)` Deposits `money` dollars into the account numbered `account`. Return `true` if the transaction was successful, `false` otherwise.
- `boolean withdraw(int account, long money)` Withdraws `money` dollars from the account numbered `account`. Return `true` if the transaction was successful, `false` otherwise.

---

## ‚öôÔ∏è Constraints

- `n == balance.length`
- `1 <= n, account, account1, account2 <= 10^5`
- `0 <= balance[i], money <= 10^12`
- At most `10^4` calls will be made to **each** function `transfer`, `deposit`, `withdraw`.

---

## üí° Examples

| Input Operations                                                      | Input Values                                                                    | Output                                   | Explanation                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| :-------------------------------------------------------------------- | :------------------------------------------------------------------------------ | :--------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `["Bank", "withdraw", "transfer", "deposit", "transfer", "withdraw"]` | `[[[10, 100, 20, 50, 30]], [3, 10], [5, 1, 20], [5, 20], [3, 4, 15], [10, 50]]` | `[null, true, true, true, false, false]` | `Bank bank = new Bank([10, 100, 20, 50, 30]);`<br>`bank.withdraw(3, 10);` // returns true, Account 3: $20 -> $10.<br>`bank.transfer(5, 1, 20);` // returns true, Account 5: $30 -> $10, Account 1: $10 -> $30.<br>`bank.deposit(5, 20);` // returns true, Account 5: $10 -> $30.<br>`bank.transfer(3, 4, 15);` // returns false, Account 3 has $10, cannot transfer $15.<br>`bank.withdraw(10, 50);` // returns false, Account 10 does not exist. |

---

## üß† Approach

The problem asks us to simulate a simple banking system with deposit, withdraw, and transfer functionalities. We need to implement a `Bank` class to handle these operations while ensuring transaction validity.

1.  **Initialization (`Bank` constructor):**

    - Store the initial balances provided in the input vector. Since account numbers are 1-based (1 to n) and the input array is 0-based, we need to map account `k` to array index `k-1`.
    - Store the total number of accounts, `n`.
    - We can use a class member `vector<long long> balance` to store the balances and an integer `n` for the count.
    - The constructor copies the input vector into the class member vector. This takes O(n) time and O(n) space.

2.  **Validation Logic:**

    - **Account Validity:** Before performing any operation, check if the involved account numbers (`account`, `account1`, `account2`) are within the valid range \[1, n]. Since the constraints state account numbers are `>= 1`, we only need to check if they are `> n`.
    - **Sufficient Funds:** For `withdraw` and `transfer` operations, check if the source account (`account` for withdraw, `account1` for transfer) has enough money (`>= money`). Remember to access the balance using the 0-based index (e.g., `balance[account1 - 1]`).

3.  **Transfer (`transfer`):**

    - Perform validation checks:
      - Is `account1 > n`?
      - Is `account2 > n`?
      - Is `balance[account1 - 1] < money`?
    - If any check fails, return `false`.
    - If valid, update balances: `balance[account1 - 1] -= money` and `balance[account2 - 1] += money`.
    - Return `true`. This operation takes O(1) time.

4.  **Deposit (`deposit`):**

    - Perform validation check:
      - Is `account > n`?
    - If invalid, return `false`.
    - If valid, update balance: `balance[account - 1] += money`.
    - Return `true`. This operation takes O(1) time.

5.  **Withdraw (`withdraw`):**
    - Perform validation checks:
      - Is `account > n`?
      - Is `balance[account - 1] < money`?
    - If any check fails, return `false`.
    - If valid, update balance: `balance[account - 1] -= money`.
    - Return `true`. This operation takes O(1) time.

**Key Point:** The core idea is direct simulation with careful handling of 1-based account numbers and 0-based array indexing, along with the specified validation rules.

---

## üíª Solution Code (C++)

```cpp
// Intuition: Simulate bank operations directly using an array/vector to store balances.
//            Handle 1-based account indexing vs 0-based array indexing.
// Approach:
// 1. Store balances in a member vector `balance`. Store account count `n`.
// 2. Implement `transfer`, `deposit`, `withdraw` methods.
// 3. In each method, first validate account numbers (1 <= account <= n).
// 4. For `transfer` and `withdraw`, validate sufficient funds.
// 5. If valid, update the balances in the `balance` vector using 0-based indexing (account - 1).
// 6. Return `true` for successful transactions, `false` otherwise.
// Time Complexity:
// - Constructor: O(n) - due to copying the initial balance vector.
// - transfer, deposit, withdraw: O(1) - direct access and update.
// Space Complexity: O(n) - to store the balances vector.

class Bank {
public:
    vector<long long> balance; // Vector to store account balances (0-indexed)
    int n;                     // Number of accounts

    // Constructor: Initializes the Bank object with balances
    Bank(vector<long long>& initial_balance) {
        n = initial_balance.size(); // Get the number of accounts
        this->balance = initial_balance; // Copy the initial balances to the member vector
    }

    // Transfers money from account1 to account2
    bool transfer(int account1, int account2, long long money) {
        // Validation: Check if account numbers are valid and if account1 has sufficient funds
        if (account1 > n || account2 > n || balance[account1 - 1] < money) {
            return false; // Transaction invalid
        }
        // Perform the transfer
        balance[account1 - 1] -= money; // Debit from account1
        balance[account2 - 1] += money; // Credit to account2
        return true; // Transaction successful
    }

    // Deposits money into an account
    bool deposit(int account, long long money) {
        // Validation: Check if the account number is valid
        if (account > n) {
            return false; // Transaction invalid
        }
        // Perform the deposit
        balance[account - 1] += money; // Credit to account
        return true; // Transaction successful
    }

    // Withdraws money from an account
    bool withdraw(int account, long long money) {
        // Validation: Check if account number is valid and if account has sufficient funds
        if (account > n || balance[account - 1] < money) {
            return false; // Transaction invalid
        }
        // Perform the withdrawal
        balance[account - 1] -= money; // Debit from account
        return true; // Transaction successful
    }
};

/**
 * Your Bank object will be instantiated and called as such:
 * Bank* obj = new Bank(balance);
 * bool param_1 = obj->transfer(account1,account2,money);
 * bool param_2 = obj->deposit(account,money);
 * bool param_3 = obj->withdraw(account,money);
 */

/*
*
* Dry Run (Example 1)
* Initial balance: [10, 100, 20, 50, 30], n = 5
*
* 1. bank.withdraw(3, 10):
* - account=3, money=10
* - Validations: 3<=5 (ok), balance[2]=20 >= 10 (ok)
* - Update: balance[2] = 20 - 10 = 10
* - Balances: [10, 100, 10, 50, 30]
* - Return: true
*
* 2. bank.transfer(5, 1, 20):
* - account1=5, account2=1, money=20
* - Validations: 5<=5 (ok), 1<=5 (ok), balance[4]=30 >= 20 (ok)
* - Update: balance[4] = 30 - 20 = 10, balance[0] = 10 + 20 = 30
* - Balances: [30, 100, 10, 50, 10]
* - Return: true
*
* 3. bank.deposit(5, 20):
* - account=5, money=20
* - Validations: 5<=5 (ok)
* - Update: balance[4] = 10 + 20 = 30
* - Balances: [30, 100, 10, 50, 30]
* - Return: true
*
* 4. bank.transfer(3, 4, 15):
* - account1=3, account2=4, money=15
* - Validations: 3<=5 (ok), 4<=5 (ok), balance[2]=10 < 15 (fail)
* - Return: false
*
* 5. bank.withdraw(10, 50):
* - account=10, money=50
* - Validations: 10 > 5 (fail)
* - Return: false
*
*/
```

---

## üìù Notes

- **Indexing:** Be mindful of the difference between the 1-based account numbers used in the function parameters and the 0-based indexing required to access the `balance` vector. Always subtract 1 from the account number before using it as an index.
- **Data Types:** Use `long long` for `money` and the `balance` vector elements, as the values can go up to 10^12, exceeding the capacity of a standard `int`.
- **Efficiency:** The O(1) time complexity for each transaction operation is crucial, given that up to 10^4 calls can be made for each function. The O(n) constructor time is acceptable as it's a one-time cost.

---

## ‚ú® Key Insights

- The problem is primarily about careful implementation and handling edge cases (invalid accounts, insufficient funds).
- Using a `vector` (or similar dynamic array) provides efficient O(1) access to account balances based on their index.
- The constraints on the number of calls suggest that O(1) time complexity for transactions is necessary for the solution to pass within the time limits.

---

## üöÄ Further Exploration

- **Concurrency:** How would you handle transactions if multiple operations could happen simultaneously? This would require mechanisms like locking (mutexes) to prevent race conditions where balances might be read or updated incorrectly.
- **Error Handling:** Instead of just returning `true`/`false`, the system could return specific error codes or throw exceptions for different failure reasons (e.g., "Invalid Account", "Insufficient Funds").
- **Transaction Log:** A real bank system would likely log every transaction attempt (successful or failed) for auditing purposes.

---

## üìö References

- **LeetCode Problem:** [https://leetcode.com/problems/simple-bank-system/](https://leetcode.com/problems/simple-bank-system/)
- **Vector (C++):** [https://en.cppreference.com/w/cpp/container/vector](https://en.cppreference.com/w/cpp/container/vector)

---

## üè∑Ô∏è Tags

`Array`, `Design`, `Simulation`, `LeetCode`, `Medium`

---

## üìÑ License

This repository is released under the [MIT License](./LICENSE).

> **This repository and its solutions are provided for educational purposes only and are not intended for commercial use. Please refer to the [LeetCode problem statement](https://leetcode.com/problems/simple-bank-system/) for original content and copyright.**

---

## üë®‚Äçüíª Author

- [imnilesh18](https://github.com/imnilesh18)
